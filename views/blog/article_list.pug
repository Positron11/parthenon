extends ../base.pug

append stylesheets
	link(rel="stylesheet", href="/stylesheets/blog/article_list.css")

append scripts 
	script(type="text/javascript", src="/javascripts/balancetext.min.js", defer)

block navtray_buttons
	if user && user.roles.includes("superuser")
		a(href="/blog/create").mUnstyled: img(src="/images/icons/write.svg")

block main 
	//- page header
	#Header
		h1 The Dispatch.
		h2 Now, hear me out.

	.Separator

	//- article previews list
	#ArticlePreviews.Flexbox.mColumn.mStandardSpacing
		for article in articles
			a.ArticlePreview(href=article.url).mUnstyled.Flexbox
				//- preview date
				.date.Flexbox
					- var date = new Date(article.created_date);
					.day= date.getDate().toString().padStart(2, "0") 
					.month= date.toLocaleString('default', { month: "short" })
					.year= date.getFullYear()

				//- preview header
				.header.Flexbox.mColumn.mMinimalSpacing
					.title: h3!= article.title
					.subtitle: h4!= article.subtitle 
				
				//- preview description
				p.description.uTruncateLines(style="--lines:3")!= article.renderDescription()